<%# locals: author, count (optional), button_text (optional) %>
<% articles_count = local_assigns[:count] || (author.respond_to?(:articles_count) ? author.articles_count : author.articles.size) %>

<li class="rounded-2xl overflow-hidden bg-white p-4 shadow hover:shadow-lg transition">
  <!-- Header: name + article count -->
  <header class="mb-3 flex items-start justify-between gap-3">
    <h3 class="text-lg font-semibold leading-tight truncate">
      <%= link_to author.name, author_path(author, locale: I18n.locale), class: "hover:underline" %>
    </h3>

    <span class="inline-flex items-center gap-2 text-sm text-gray-600 whitespace-nowrap">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M7 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8.5L14.5 2H7Zm0 2h6v5h5v11H7V4Zm2 6h6v2H9V10Zm0 4h6v2H9v-2Z"/></svg>
      <%= t("authors.article_count", count: articles_count, default: "#{articles_count} articles") %>
    </span>
  </header>

  <!-- Slightly smaller image panel (4:3 instead of square) -->
  <div class="overflow-hidden rounded-xl border bg-gray-50">
    <% if author.avatar_url.present? %>
      <%= link_to author_path(author, locale: I18n.locale), class: "block" do %>
        <%= image_tag author.avatar_url, alt: author.name, class: "w-full object-cover aspect-[4/3]" %>
      <% end %>
    <% else %>
      <%= link_to author_path(author, locale: I18n.locale), class: "block" do %>
        <div class="grid place-items-center aspect-[4/3] text-gray-400">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-5 0-9 2.5-9 5.5V22h18v-2.5C21 16.5 17 14 12 14Z"/>
          </svg>
        </div>
      <% end %>
    <% end %>
  </div>

  <!-- CTA -->
  <footer class="mt-4">
    <%= link_to (local_assigns[:button_text] || t("authors.view_profile", default: "صفحة المتحدث")),
                author_path(author, locale: I18n.locale),
                class: "inline-flex items-center gap-2 rounded-xl bg-gray-900 px-4 py-2 text-sm font-medium text-white hover:bg-gray-800" %>
  </footer>
</li>
